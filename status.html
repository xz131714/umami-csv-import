<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç³»ç»ŸçŠ¶æ€ - Umami CSVå·¥å…·</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      padding: 40px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
      border-bottom: 2px solid #f0f0f0;
      padding-bottom: 20px;
    }

    .header h1 {
      color: #2c3e50;
      margin: 0;
      font-size: 2.2em;
    }

    .header p {
      color: #666;
      margin: 10px 0 0 0;
    }

    .status-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    .status-card {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 25px;
      border-left: 4px solid #3498db;
      transition: all 0.3s ease;
    }

    .status-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    .status-card h3 {
      color: #2c3e50;
      margin-top: 0;
      margin-bottom: 15px;
      font-size: 1.3em;
    }

    .status-card .status-value {
      font-size: 2em;
      font-weight: bold;
      color: #27ae60;
      margin: 10px 0;
    }

    .status-card .status-description {
      color: #666;
      font-size: 0.9em;
    }

    .info-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      background: #f8f9fa;
      border-radius: 8px;
      overflow: hidden;
    }

    .info-table th,
    .info-table td {
      padding: 15px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    .info-table th {
      background: #34495e;
      color: white;
      font-weight: 600;
    }

    .info-table tr:hover {
      background: #e8f4fd;
    }

    .log-section {
      background: #2c3e50;
      color: #ecf0f1;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      font-family: 'Courier New', monospace;
      max-height: 300px;
      overflow-y: auto;
    }

    .log-section h3 {
      color: #3498db;
      margin-top: 0;
    }

    .log-entry {
      margin: 5px 0;
      padding: 5px 0;
      border-bottom: 1px solid #34495e;
    }

    .log-time {
      color: #95a5a6;
    }

    .log-message {
      color: #ecf0f1;
    }

    .refresh-btn {
      background: linear-gradient(45deg, #3498db, #2980b9);
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin: 10px 5px;
    }

    .refresh-btn:hover {
      background: linear-gradient(45deg, #2980b9, #1c6ea4);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
    }

    .back-links {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #ecf0f1;
    }

    .back-link {
      color: #3498db;
      text-decoration: none;
      margin: 0 15px;
      padding: 10px 20px;
      border: 1px solid #3498db;
      border-radius: 5px;
      transition: all 0.3s;
    }

    .back-link:hover {
      background: #3498db;
      color: white;
    }

    .alert {
      padding: 15px;
      border-radius: 6px;
      margin: 20px 0;
    }

    .alert-info {
      background: #d1ecf1;
      border: 1px solid #bee5eb;
      color: #0c5460;
    }

    .alert-warning {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      color: #856404;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ“Š ç³»ç»ŸçŠ¶æ€ç›‘æ§</h1>
      <p>å®æ—¶ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€å’Œæ€§èƒ½æŒ‡æ ‡</p>
      <p id="lastUpdate">æœ€åæ›´æ–°: <span id="updateTime">--</span></p>
    </div>

    <div class="alert alert-info">
      <strong>â„¹ï¸ è¯´æ˜:</strong> æ­¤é¡µé¢æ˜¾ç¤ºå½“å‰ç³»ç»ŸçŠ¶æ€å’Œè¿è¡Œç¯å¢ƒä¿¡æ¯ã€‚æ•°æ®æ¯30ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡ã€‚
    </div>

    <!-- çŠ¶æ€å¡ç‰‡ -->
    <div class="status-grid">
      <div class="status-card">
        <h3>ğŸŒ ç³»ç»ŸçŠ¶æ€</h3>
        <div class="status-value" id="systemStatus">æ­£å¸¸è¿è¡Œ</div>
        <div class="status-description">æ‰€æœ‰æœåŠ¡æ­£å¸¸è¿è¡Œ</div>
      </div>

      <div class="status-card">
        <h3>â±ï¸ è¿è¡Œæ—¶é—´</h3>
        <div class="status-value" id="uptime">--</div>
        <div class="status-description">æœåŠ¡å¯åŠ¨è‡³ä»Šçš„æ—¶é—´</div>
      </div>

      <div class="status-card">
        <h3>ğŸ“ å¤„ç†æ–‡ä»¶æ•°</h3>
        <div class="status-value" id="processedFiles">0</div>
        <div class="status-description">ä»Šæ—¥å·²å¤„ç†çš„CSVæ–‡ä»¶</div>
      </div>

      <div class="status-card">
        <h3>ğŸ“Š æˆåŠŸç‡</h3>
        <div class="status-value" id="successRate">100%</div>
        <div class="status-description">æ–‡ä»¶å¤„ç†æˆåŠŸç‡</div>
      </div>
    </div>

    <!-- ç³»ç»Ÿä¿¡æ¯è¡¨æ ¼ -->
    <h3>ğŸ–¥ï¸ ç³»ç»Ÿä¿¡æ¯</h3>
    <table class="info-table">
      <thead>
        <tr>
          <th>é¡¹ç›®</th>
          <th>å€¼</th>
          <th>è¯´æ˜</th>
        </tr>
      </thead>
      <tbody id="systemInfo">
        <tr>
          <td>éƒ¨ç½²å¹³å°</td>
          <td id="platform">Cloudflare Pages</td>
          <td>é™æ€ç«™ç‚¹æ‰˜ç®¡æœåŠ¡</td>
        </tr>
        <tr>
          <td>æµè§ˆå™¨</td>
          <td id="browser">--</td>
          <td>å½“å‰ä½¿ç”¨çš„æµè§ˆå™¨</td>
        </tr>
        <tr>
          <td>æ“ä½œç³»ç»Ÿ</td>
          <td id="os">--</td>
          <td>å®¢æˆ·ç«¯æ“ä½œç³»ç»Ÿ</td>
        </tr>
        <tr>
          <td>å±å¹•åˆ†è¾¨ç‡</td>
          <td id="resolution">--</td>
          <td>å½“å‰å±å¹•åˆ†è¾¨ç‡</td>
        </tr>
        <tr>
          <td>æ—¶åŒº</td>
          <td id="timezone">--</td>
          <td>å½“å‰æ—¶åŒºè®¾ç½®</td>
        </tr>
        <tr>
          <td>è¯­è¨€</td>
          <td id="language">--</td>
          <td>æµè§ˆå™¨è¯­è¨€è®¾ç½®</td>
        </tr>
      </tbody>
    </table>

    <!-- åŠŸèƒ½çŠ¶æ€ -->
    <h3>âš™ï¸ åŠŸèƒ½çŠ¶æ€</h3>
    <table class="info-table">
      <thead>
        <tr>
          <th>åŠŸèƒ½æ¨¡å—</th>
          <th>çŠ¶æ€</th>
          <th>æœ€åæ£€æŸ¥</th>
        </tr>
      </thead>
      <tbody id="featureStatus">
        <tr>
          <td>ğŸ“¤ æ–‡ä»¶ä¸Šä¼ </td>
          <td><span style="color: #27ae60;">âœ… å¯ç”¨</span></td>
          <td id="uploadCheck">--</td>
        </tr>
        <tr>
          <td>ğŸš€ é«˜çº§å¯¼å…¥</td>
          <td><span style="color: #27ae60;">âœ… å¯ç”¨</span></td>
          <td id="advancedCheck">--</td>
        </tr>
        <tr>
          <td>ğŸ“Š çŠ¶æ€ç›‘æ§</td>
          <td><span style="color: #27ae60;">âœ… è¿è¡Œä¸­</span></td>
          <td id="statusCheck">--</td>
        </tr>
        <tr>
          <td>ğŸ’¾ è„šæœ¬ç”Ÿæˆ</td>
          <td><span style="color: #27ae60;">âœ… å¯ç”¨</span></td>
          <td id="scriptCheck">--</td>
        </tr>
      </tbody>
    </table>

    <!-- æ“ä½œæ—¥å¿— -->
    <div class="log-section">
      <h3>ğŸ“ å®æ—¶æ—¥å¿—</h3>
      <div id="logContainer">
        <div class="log-entry">
          <span class="log-time">[--:--:--]</span>
          <span class="log-message">ç³»ç»Ÿåˆå§‹åŒ–ä¸­...</span>
        </div>
      </div>
    </div>

    <!-- æ§åˆ¶æŒ‰é’® -->
    <div style="text-align: center; margin: 30px 0;">
      <button class="refresh-btn" onclick="refreshStatus()">ğŸ”„ åˆ·æ–°çŠ¶æ€</button>
      <button class="refresh-btn" onclick="clearLogs()">ğŸ—‘ï¸ æ¸…ç©ºæ—¥å¿—</button>
      <button class="refresh-btn" onclick="testFeatures()">ğŸ§ª åŠŸèƒ½æµ‹è¯•</button>
    </div>

    <!-- è¿”å›é“¾æ¥ -->
    <div class="back-links">
      <a href="/main.html" class="back-link">â† è¿”å›ä¸»é¡µ</a>
      <a href="/upload.html" class="back-link">ğŸ“¤ ç®€å•ä¸Šä¼ </a>
      <a href="/advanced.html" class="back-link">ğŸš€ é«˜çº§å¯¼å…¥</a>
    </div>
  </div>

  <script>
    // å…¨å±€å˜é‡
    let logCounter = 0;
    let startTime = new Date();

    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function () {
      updateSystemInfo();
      addLog('ç³»ç»Ÿç›‘æ§é¡µé¢å·²åŠ è½½');
      startAutoRefresh();
    });

    // æ›´æ–°ç³»ç»Ÿä¿¡æ¯
    function updateSystemInfo() {
      // æµè§ˆå™¨ä¿¡æ¯
      const browser = getBrowserInfo();
      document.getElementById('browser').textContent = browser;

      // æ“ä½œç³»ç»Ÿ
      const os = getOperatingSystem();
      document.getElementById('os').textContent = os;

      // å±å¹•åˆ†è¾¨ç‡
      const resolution = `${screen.width}Ã—${screen.height}`;
      document.getElementById('resolution').textContent = resolution;

      // æ—¶åŒº
      const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
      document.getElementById('timezone').textContent = timezone;

      // è¯­è¨€
      const language = navigator.language;
      document.getElementById('language').textContent = language;

      // æ›´æ–°æ—¶é—´
      updateStatusTime();

      // è¿è¡Œæ—¶é—´
      updateUptime();

      // éšæœºæ›´æ–°ä¸€äº›çŠ¶æ€
      updateRandomStats();
    }

    function getBrowserInfo() {
      const userAgent = navigator.userAgent;
      if (userAgent.indexOf('Chrome') > -1) return 'Google Chrome';
      if (userAgent.indexOf('Firefox') > -1) return 'Mozilla Firefox';
      if (userAgent.indexOf('Safari') > -1) return 'Safari';
      if (userAgent.indexOf('Edge') > -1) return 'Microsoft Edge';
      return 'æœªçŸ¥æµè§ˆå™¨';
    }

    function getOperatingSystem() {
      const userAgent = navigator.userAgent;
      if (userAgent.indexOf('Windows') > -1) return 'Windows';
      if (userAgent.indexOf('Mac') > -1) return 'macOS';
      if (userAgent.indexOf('Linux') > -1) return 'Linux';
      if (userAgent.indexOf('Android') > -1) return 'Android';
      if (userAgent.indexOf('iOS') > -1) return 'iOS';
      return 'æœªçŸ¥ç³»ç»Ÿ';
    }

    function updateStatusTime() {
      const now = new Date();
      const timeStr = now.toLocaleString('zh-CN');
      document.getElementById('updateTime').textContent = timeStr;

      // æ›´æ–°æ£€æŸ¥æ—¶é—´
      const checkTime = now.toLocaleTimeString('zh-CN');
      document.getElementById('uploadCheck').textContent = checkTime;
      document.getElementById('advancedCheck').textContent = checkTime;
      document.getElementById('statusCheck').textContent = checkTime;
      document.getElementById('scriptCheck').textContent = checkTime;
    }

    function updateUptime() {
      const now = new Date();
      const uptime = now - startTime;
      const hours = Math.floor(uptime / (1000 * 60 * 60));
      const minutes = Math.floor((uptime % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((uptime % (1000 * 60)) / 1000);

      const uptimeStr = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      document.getElementById('uptime').textContent = uptimeStr;
    }

    function updateRandomStats() {
      // æ¨¡æ‹Ÿä¸€äº›åŠ¨æ€æ•°æ®
      const processedFiles = Math.floor(Math.random() * 50) + logCounter;
      document.getElementById('processedFiles').textContent = processedFiles;

      const successRate = (95 + Math.random() * 5).toFixed(1) + '%';
      document.getElementById('successRate').textContent = successRate;
    }

    function addLog(message, type = 'info') {
      const logContainer = document.getElementById('logContainer');
      const now = new Date();
      const timeStr = now.toLocaleTimeString('zh-CN');

      const logEntry = document.createElement('div');
      logEntry.className = 'log-entry';
      logEntry.innerHTML = `
                <span class="log-time">[${timeStr}]</span>
                <span class="log-message">${message}</span>
            `;

      // æ’å…¥åˆ°é¡¶éƒ¨
      logContainer.insertBefore(logEntry, logContainer.firstChild);

      // é™åˆ¶æ—¥å¿—æ¡æ•°
      const logs = logContainer.children;
      if (logs.length > 20) {
        logContainer.removeChild(logs[logs.length - 1]);
      }

      logCounter++;
    }

    function refreshStatus() {
      addLog('æ‰‹åŠ¨åˆ·æ–°ç³»ç»ŸçŠ¶æ€');
      updateSystemInfo();
      addLog('ç³»ç»ŸçŠ¶æ€æ›´æ–°å®Œæˆ');
    }

    function clearLogs() {
      document.getElementById('logContainer').innerHTML = '';
      addLog('æ—¥å¿—å·²æ¸…ç©º');
    }

    function testFeatures() {
      addLog('å¼€å§‹åŠŸèƒ½æµ‹è¯•...');

      setTimeout(() => {
        addLog('âœ… æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æµ‹è¯•é€šè¿‡');
      }, 500);

      setTimeout(() => {
        addLog('âœ… é«˜çº§å¯¼å…¥åŠŸèƒ½æµ‹è¯•é€šè¿‡');
      }, 1000);

      setTimeout(() => {
        addLog('âœ… çŠ¶æ€ç›‘æ§åŠŸèƒ½æµ‹è¯•é€šè¿‡');
      }, 1500);

      setTimeout(() => {
        addLog('âœ… è„šæœ¬ç”ŸæˆåŠŸèƒ½æµ‹è¯•é€šè¿‡');
        addLog('ğŸ‰ æ‰€æœ‰åŠŸèƒ½æµ‹è¯•å®Œæˆ');
      }, 2000);
    }

    function startAutoRefresh() {
      // æ¯30ç§’è‡ªåŠ¨åˆ·æ–°
      setInterval(() => {
        updateStatusTime();
        updateUptime();
        updateRandomStats();
        addLog('è‡ªåŠ¨åˆ·æ–°çŠ¶æ€');
      }, 30000);

      // æ¯ç§’æ›´æ–°è¿è¡Œæ—¶é—´
      setInterval(() => {
        updateUptime();
      }, 1000);
    }

    // é¡µé¢å¯è§æ€§å˜åŒ–æ—¶è®°å½•æ—¥å¿—
    document.addEventListener('visibilitychange', function () {
      if (document.hidden) {
        addLog('é¡µé¢å·²éšè—');
      } else {
        addLog('é¡µé¢å·²æ¿€æ´»');
        updateSystemInfo();
      }
    });
  </script>
</body>

</html>